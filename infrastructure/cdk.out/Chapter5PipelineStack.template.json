{
 "Resources": {
  "Chapter5PipelineProdChapter5BackEndBuildPipelineProjectProductionRoleD4AC4C45": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "codebuild.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Context",
      "Value": "chapter5-production-pipeline"
     },
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-Pipeline-Prod/Chapter5-BackEndBuild-PipelineProject-Production/Role/Resource"
   }
  },
  "Chapter5PipelineProdChapter5BackEndBuildPipelineProjectProductionRoleDefaultPolicyB29F86BD": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":logs:us-east-1:277707106605:log-group:/aws/codebuild/",
           {
            "Ref": "Chapter5PipelineProdChapter5BackEndBuildPipelineProjectProduction9DCECFBA"
           },
           ":*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":logs:us-east-1:277707106605:log-group:/aws/codebuild/",
           {
            "Ref": "Chapter5PipelineProdChapter5BackEndBuildPipelineProjectProduction9DCECFBA"
           }
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "codebuild:BatchPutCodeCoverages",
        "codebuild:BatchPutTestCases",
        "codebuild:CreateReport",
        "codebuild:CreateReportGroup",
        "codebuild:UpdateReport"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":codebuild:us-east-1:277707106605:report-group/",
          {
           "Ref": "Chapter5PipelineProdChapter5BackEndBuildPipelineProjectProduction9DCECFBA"
          },
          "-*"
         ]
        ]
       }
      },
      {
       "Action": [
        "iam:PassRole",
        "sts:AssumeRole"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:iam::*:role/cdk-hnb659fds-deploy-role-*",
        "arn:aws:iam::*:role/cdk-hnb659fds-file-publishing-*",
        "arn:aws:iam::*:role/cdk-hnb659fds-image-publishing-role-*",
        "arn:aws:iam::*:role/cdk-hnb659fds-lookup-role-*",
        "arn:aws:iam::*:role/cdk-readOnlyRole"
       ],
       "Sid": "AssumeRole"
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "BackendTestPipelineProductionArtifactsBucket937C6F73",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "BackendTestPipelineProductionArtifactsBucket937C6F73",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "BackendTestPipelineProductionArtifactsBucketEncryptionKeyDF91F1D8",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "Chapter5PipelineProdChapter5BackEndBuildPipelineProjectProductionRoleDefaultPolicyB29F86BD",
    "Roles": [
     {
      "Ref": "Chapter5PipelineProdChapter5BackEndBuildPipelineProjectProductionRoleD4AC4C45"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-Pipeline-Prod/Chapter5-BackEndBuild-PipelineProject-Production/Role/DefaultPolicy/Resource"
   }
  },
  "Chapter5PipelineProdChapter5BackEndBuildPipelineProjectProduction9DCECFBA": {
   "Type": "AWS::CodeBuild::Project",
   "Properties": {
    "Artifacts": {
     "Type": "CODEPIPELINE"
    },
    "Cache": {
     "Type": "NO_CACHE"
    },
    "EncryptionKey": {
     "Fn::GetAtt": [
      "BackendTestPipelineProductionArtifactsBucketEncryptionKeyDF91F1D8",
      "Arn"
     ]
    },
    "Environment": {
     "ComputeType": "BUILD_GENERAL1_SMALL",
     "Image": "aws/codebuild/amazonlinux2-x86_64-standard:4.0",
     "ImagePullCredentialsType": "CODEBUILD",
     "PrivilegedMode": true,
     "Type": "LINUX_CONTAINER"
    },
    "Name": "Chapter5-BackEndBuild-PipelineProject-Production",
    "ServiceRole": {
     "Fn::GetAtt": [
      "Chapter5PipelineProdChapter5BackEndBuildPipelineProjectProductionRoleD4AC4C45",
      "Arn"
     ]
    },
    "Source": {
     "BuildSpec": "{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"runtime-versions\": {\n        \"nodejs\": \"16\"\n      }\n    },\n    \"pre_build\": {\n      \"on-failure\": \"ABORT\",\n      \"commands\": [\n        \"cd web\",\n        \"yarn install\",\n        \"cd ../server\",\n        \"yarn install\",\n        \"cd ../infrastructure\",\n        \"yarn install\"\n      ]\n    },\n    \"build\": {\n      \"on-failure\": \"ABORT\",\n      \"commands\": [\n        \"cd ../web\",\n        \"yarn build:prod\",\n        \"cd ../infrastructure\",\n        \"yarn cdk deploy\"\n      ]\n    },\n    \"post_build\": {\n      \"on-failure\": \"ABORT\",\n      \"commands\": [\n        \"\"\n      ]\n    }\n  }\n}",
     "Type": "CODEPIPELINE"
    },
    "Tags": [
     {
      "Key": "Context",
      "Value": "chapter5-production-pipeline"
     },
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-Pipeline-Prod/Chapter5-BackEndBuild-PipelineProject-Production/Resource"
   }
  },
  "Chapter5PipelineProdProductionPipelineSlackNotificationsTopic5A924E27": {
   "Type": "AWS::SNS::Topic",
   "Properties": {
    "Tags": [
     {
      "Key": "Context",
      "Value": "chapter5-production-pipeline"
     },
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-Pipeline-Prod/Production-Pipeline-SlackNotificationsTopic/Resource"
   }
  },
  "Chapter5PipelineProdProductionPipelineSlackNotificationsTopicPolicyB7A8E343": {
   "Type": "AWS::SNS::TopicPolicy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sns:Publish",
       "Effect": "Allow",
       "Principal": {
        "Service": "codestar-notifications.amazonaws.com"
       },
       "Resource": {
        "Ref": "Chapter5PipelineProdProductionPipelineSlackNotificationsTopic5A924E27"
       },
       "Sid": "0"
      }
     ],
     "Version": "2012-10-17"
    },
    "Topics": [
     {
      "Ref": "Chapter5PipelineProdProductionPipelineSlackNotificationsTopic5A924E27"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-Pipeline-Prod/Production-Pipeline-SlackNotificationsTopic/Policy/Resource"
   }
  },
  "Chapter5PipelineProdNotificationRuleB83B3F1E": {
   "Type": "AWS::CodeStarNotifications::NotificationRule",
   "Properties": {
    "DetailType": "FULL",
    "EventTypeIds": [
     "codepipeline-pipeline-pipeline-execution-failed",
     "codepipeline-pipeline-pipeline-execution-canceled",
     "codepipeline-pipeline-pipeline-execution-started",
     "codepipeline-pipeline-pipeline-execution-resumed",
     "codepipeline-pipeline-pipeline-execution-succeeded",
     "codepipeline-pipeline-manual-approval-needed"
    ],
    "Name": "chap5",
    "Resource": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":codepipeline:us-east-1:277707106605:",
       {
        "Ref": "BackendTestPipelineProduction57407B9A"
       }
      ]
     ]
    },
    "Tags": {
     "Context": "chapter5-production-pipeline",
     "Project": "Chapter5-Pipeline"
    },
    "Targets": [
     {
      "TargetAddress": {
       "Ref": "Chapter5PipelineProdProductionPipelineSlackNotificationsTopic5A924E27"
      },
      "TargetType": "SNS"
     },
     {
      "TargetAddress": "arn:aws:chatbot::277707106605:chat-configuration/slack-channel/my-chap5-config",
      "TargetType": "AWSChatbotSlack"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-Pipeline-Prod/NotificationRule/Resource"
   }
  },
  "Chapter5BackEndTestPipelineProjectProductionRoleF4A8A386": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "codebuild.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-BackEndTest-PipelineProject-Production/Role/Resource"
   }
  },
  "Chapter5BackEndTestPipelineProjectProductionRoleDefaultPolicy8FCCA26A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":logs:us-east-1:277707106605:log-group:/aws/codebuild/",
           {
            "Ref": "Chapter5BackEndTestPipelineProjectProduction3AE33D37"
           },
           ":*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":logs:us-east-1:277707106605:log-group:/aws/codebuild/",
           {
            "Ref": "Chapter5BackEndTestPipelineProjectProduction3AE33D37"
           }
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "codebuild:BatchPutCodeCoverages",
        "codebuild:BatchPutTestCases",
        "codebuild:CreateReport",
        "codebuild:CreateReportGroup",
        "codebuild:UpdateReport"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":codebuild:us-east-1:277707106605:report-group/",
          {
           "Ref": "Chapter5BackEndTestPipelineProjectProduction3AE33D37"
          },
          "-*"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "BackendTestPipelineProductionArtifactsBucket937C6F73",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "BackendTestPipelineProductionArtifactsBucket937C6F73",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "BackendTestPipelineProductionArtifactsBucketEncryptionKeyDF91F1D8",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "Chapter5BackEndTestPipelineProjectProductionRoleDefaultPolicy8FCCA26A",
    "Roles": [
     {
      "Ref": "Chapter5BackEndTestPipelineProjectProductionRoleF4A8A386"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-BackEndTest-PipelineProject-Production/Role/DefaultPolicy/Resource"
   }
  },
  "Chapter5BackEndTestPipelineProjectProduction3AE33D37": {
   "Type": "AWS::CodeBuild::Project",
   "Properties": {
    "Artifacts": {
     "Type": "CODEPIPELINE"
    },
    "Cache": {
     "Type": "NO_CACHE"
    },
    "EncryptionKey": {
     "Fn::GetAtt": [
      "BackendTestPipelineProductionArtifactsBucketEncryptionKeyDF91F1D8",
      "Arn"
     ]
    },
    "Environment": {
     "ComputeType": "BUILD_GENERAL1_SMALL",
     "Image": "aws/codebuild/amazonlinux2-x86_64-standard:4.0",
     "ImagePullCredentialsType": "CODEBUILD",
     "PrivilegedMode": false,
     "Type": "LINUX_CONTAINER"
    },
    "Name": "Chapter5-BackEndTest-PipelineProject-Production",
    "ServiceRole": {
     "Fn::GetAtt": [
      "Chapter5BackEndTestPipelineProjectProductionRoleF4A8A386",
      "Arn"
     ]
    },
    "Source": {
     "BuildSpec": "{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"runtime-versions\": {\n        \"nodejs\": \"16\"\n      }\n    },\n    \"pre_build\": {\n      \"on-failure\": \"ABORT\",\n      \"commands\": [\n        \"cd server/\",\n        \"yarn install\"\n      ]\n    },\n    \"build\": {\n      \"on-failure\": \"ABORT\",\n      \"commands\": [\n        \"echo Testing the Back-End...\",\n        \"yarn test\"\n      ]\n    }\n  }\n}",
     "Type": "CODEPIPELINE"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-BackEndTest-PipelineProject-Production/Resource"
   }
  },
  "Chapter5FrontEndTestPipelineProjectProductionRole77A04C8A": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "codebuild.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-FrontEndTest-PipelineProject-Production/Role/Resource"
   }
  },
  "Chapter5FrontEndTestPipelineProjectProductionRoleDefaultPolicy6EE08219": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":logs:us-east-1:277707106605:log-group:/aws/codebuild/",
           {
            "Ref": "Chapter5FrontEndTestPipelineProjectProduction804F7636"
           },
           ":*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":logs:us-east-1:277707106605:log-group:/aws/codebuild/",
           {
            "Ref": "Chapter5FrontEndTestPipelineProjectProduction804F7636"
           }
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "codebuild:BatchPutCodeCoverages",
        "codebuild:BatchPutTestCases",
        "codebuild:CreateReport",
        "codebuild:CreateReportGroup",
        "codebuild:UpdateReport"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":codebuild:us-east-1:277707106605:report-group/",
          {
           "Ref": "Chapter5FrontEndTestPipelineProjectProduction804F7636"
          },
          "-*"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "BackendTestPipelineProductionArtifactsBucket937C6F73",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "BackendTestPipelineProductionArtifactsBucket937C6F73",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "BackendTestPipelineProductionArtifactsBucketEncryptionKeyDF91F1D8",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "Chapter5FrontEndTestPipelineProjectProductionRoleDefaultPolicy6EE08219",
    "Roles": [
     {
      "Ref": "Chapter5FrontEndTestPipelineProjectProductionRole77A04C8A"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-FrontEndTest-PipelineProject-Production/Role/DefaultPolicy/Resource"
   }
  },
  "Chapter5FrontEndTestPipelineProjectProduction804F7636": {
   "Type": "AWS::CodeBuild::Project",
   "Properties": {
    "Artifacts": {
     "Type": "CODEPIPELINE"
    },
    "Cache": {
     "Type": "NO_CACHE"
    },
    "EncryptionKey": {
     "Fn::GetAtt": [
      "BackendTestPipelineProductionArtifactsBucketEncryptionKeyDF91F1D8",
      "Arn"
     ]
    },
    "Environment": {
     "ComputeType": "BUILD_GENERAL1_SMALL",
     "Image": "aws/codebuild/amazonlinux2-x86_64-standard:4.0",
     "ImagePullCredentialsType": "CODEBUILD",
     "PrivilegedMode": false,
     "Type": "LINUX_CONTAINER"
    },
    "Name": "Chapter5-FrontEndTest-PipelineProject-Production",
    "ServiceRole": {
     "Fn::GetAtt": [
      "Chapter5FrontEndTestPipelineProjectProductionRole77A04C8A",
      "Arn"
     ]
    },
    "Source": {
     "BuildSpec": "{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"runtime-versions\": {\n        \"nodejs\": \"16\"\n      }\n    },\n    \"pre_build\": {\n      \"on-failure\": \"ABORT\",\n      \"commands\": [\n        \"cd web/\",\n        \"yarn install\"\n      ]\n    },\n    \"build\": {\n      \"on-failure\": \"ABORT\",\n      \"commands\": [\n        \"echo Testing the Front-End...\",\n        \"yarn test\"\n      ]\n    }\n  }\n}",
     "Type": "CODEPIPELINE"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-FrontEndTest-PipelineProject-Production/Resource"
   }
  },
  "BackendTestPipelineProductionArtifactsBucketEncryptionKeyDF91F1D8": {
   "Type": "AWS::KMS::Key",
   "Properties": {
    "KeyPolicy": {
     "Statement": [
      {
       "Action": "kms:*",
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":iam::277707106605:root"
          ]
         ]
        }
       },
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Production/ArtifactsBucketEncryptionKey/Resource"
   }
  },
  "BackendTestPipelineProductionArtifactsBucketEncryptionKeyAlias95F88085": {
   "Type": "AWS::KMS::Alias",
   "Properties": {
    "AliasName": "alias/codepipeline-chapter5pipelinestackbackendtestpipelineproduction50465ead",
    "TargetKeyId": {
     "Fn::GetAtt": [
      "BackendTestPipelineProductionArtifactsBucketEncryptionKeyDF91F1D8",
      "Arn"
     ]
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Production/ArtifactsBucketEncryptionKeyAlias/Resource"
   }
  },
  "BackendTestPipelineProductionArtifactsBucket937C6F73": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "KMSMasterKeyID": {
         "Fn::GetAtt": [
          "BackendTestPipelineProductionArtifactsBucketEncryptionKeyDF91F1D8",
          "Arn"
         ]
        },
        "SSEAlgorithm": "aws:kms"
       }
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Production/ArtifactsBucket/Resource"
   }
  },
  "BackendTestPipelineProductionArtifactsBucketPolicy4D87876A": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "BackendTestPipelineProductionArtifactsBucket937C6F73"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "BackendTestPipelineProductionArtifactsBucket937C6F73",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "BackendTestPipelineProductionArtifactsBucket937C6F73",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Production/ArtifactsBucket/Policy/Resource"
   }
  },
  "BackendTestPipelineProductionRoleA72A3722": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "codepipeline.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Production/Role/Resource"
   }
  },
  "BackendTestPipelineProductionRoleDefaultPolicy395AF7C1": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "BackendTestPipelineProductionArtifactsBucket937C6F73",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "BackendTestPipelineProductionArtifactsBucket937C6F73",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "BackendTestPipelineProductionArtifactsBucketEncryptionKeyDF91F1D8",
         "Arn"
        ]
       }
      },
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "BackendTestPipelineProductionBackEndTestCodePipelineActionRoleBAD11ABB",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "BackendTestPipelineProductionBuildandDeployBuildandDeployFrontandBackEndCodePipelineActionRoleC28C6FCE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "BackendTestPipelineProductionFrontEndTestCodePipelineActionRoleCBDF2EEE",
          "Arn"
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "BackendTestPipelineProductionRoleDefaultPolicy395AF7C1",
    "Roles": [
     {
      "Ref": "BackendTestPipelineProductionRoleA72A3722"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Production/Role/DefaultPolicy/Resource"
   }
  },
  "BackendTestPipelineProduction57407B9A": {
   "Type": "AWS::CodePipeline::Pipeline",
   "Properties": {
    "ArtifactStore": {
     "EncryptionKey": {
      "Id": {
       "Fn::GetAtt": [
        "BackendTestPipelineProductionArtifactsBucketEncryptionKeyDF91F1D8",
        "Arn"
       ]
      },
      "Type": "KMS"
     },
     "Location": {
      "Ref": "BackendTestPipelineProductionArtifactsBucket937C6F73"
     },
     "Type": "S3"
    },
    "Name": "Chapter5-Pipeline-Production",
    "RoleArn": {
     "Fn::GetAtt": [
      "BackendTestPipelineProductionRoleA72A3722",
      "Arn"
     ]
    },
    "Stages": [
     {
      "Actions": [
       {
        "ActionTypeId": {
         "Category": "Source",
         "Owner": "ThirdParty",
         "Provider": "GitHub",
         "Version": "1"
        },
        "Configuration": {
         "Owner": "Reyev123",
         "Repo": "AWS-CDK-in-Practice",
         "Branch": "dev",
         "OAuthToken": "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",
         "PollForSourceChanges": false
        },
        "Name": "Source",
        "OutputArtifacts": [
         {
          "Name": "Artifact_Source_Source"
         }
        ],
        "RunOrder": 1
       }
      ],
      "Name": "Source"
     },
     {
      "Actions": [
       {
        "ActionTypeId": {
         "Category": "Build",
         "Owner": "AWS",
         "Provider": "CodeBuild",
         "Version": "1"
        },
        "Configuration": {
         "ProjectName": {
          "Ref": "Chapter5BackEndTestPipelineProjectProduction3AE33D37"
         }
        },
        "InputArtifacts": [
         {
          "Name": "Artifact_Source_Source"
         }
        ],
        "Name": "Back-End-Test",
        "RoleArn": {
         "Fn::GetAtt": [
          "BackendTestPipelineProductionBackEndTestCodePipelineActionRoleBAD11ABB",
          "Arn"
         ]
        },
        "RunOrder": 1
       }
      ],
      "Name": "Back-End-Test"
     },
     {
      "Actions": [
       {
        "ActionTypeId": {
         "Category": "Build",
         "Owner": "AWS",
         "Provider": "CodeBuild",
         "Version": "1"
        },
        "Configuration": {
         "ProjectName": {
          "Ref": "Chapter5FrontEndTestPipelineProjectProduction804F7636"
         }
        },
        "InputArtifacts": [
         {
          "Name": "Artifact_Source_Source"
         }
        ],
        "Name": "Front-End-Test",
        "RoleArn": {
         "Fn::GetAtt": [
          "BackendTestPipelineProductionFrontEndTestCodePipelineActionRoleCBDF2EEE",
          "Arn"
         ]
        },
        "RunOrder": 1
       }
      ],
      "Name": "Front-End-Test"
     },
     {
      "Actions": [
       {
        "ActionTypeId": {
         "Category": "Build",
         "Owner": "AWS",
         "Provider": "CodeBuild",
         "Version": "1"
        },
        "Configuration": {
         "ProjectName": {
          "Ref": "Chapter5PipelineProdChapter5BackEndBuildPipelineProjectProduction9DCECFBA"
         }
        },
        "InputArtifacts": [
         {
          "Name": "Artifact_Source_Source"
         }
        ],
        "Name": "Build-and-Deploy-Front-and-Back-End",
        "RoleArn": {
         "Fn::GetAtt": [
          "BackendTestPipelineProductionBuildandDeployBuildandDeployFrontandBackEndCodePipelineActionRoleC28C6FCE",
          "Arn"
         ]
        },
        "RunOrder": 1
       }
      ],
      "Name": "Build-and-Deploy"
     }
    ],
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "DependsOn": [
    "BackendTestPipelineProductionRoleDefaultPolicy395AF7C1",
    "BackendTestPipelineProductionRoleA72A3722"
   ],
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Production/Resource"
   }
  },
  "BackendTestPipelineProductionSourceWebhookResourceDD2BCA66": {
   "Type": "AWS::CodePipeline::Webhook",
   "Properties": {
    "Authentication": "GITHUB_HMAC",
    "AuthenticationConfiguration": {
     "SecretToken": "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"
    },
    "Filters": [
     {
      "JsonPath": "$.ref",
      "MatchEquals": "refs/heads/{Branch}"
     }
    ],
    "RegisterWithThirdParty": true,
    "TargetAction": "Source",
    "TargetPipeline": {
     "Ref": "BackendTestPipelineProduction57407B9A"
    },
    "TargetPipelineVersion": 1
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Production/Source/Source/WebhookResource"
   }
  },
  "BackendTestPipelineProductionBackEndTestCodePipelineActionRoleBAD11ABB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":iam::277707106605:root"
          ]
         ]
        }
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Production/Back-End-Test/Back-End-Test/CodePipelineActionRole/Resource"
   }
  },
  "BackendTestPipelineProductionBackEndTestCodePipelineActionRoleDefaultPolicy39EAFA4A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "codebuild:BatchGetBuilds",
        "codebuild:StartBuild",
        "codebuild:StopBuild"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "Chapter5BackEndTestPipelineProjectProduction3AE33D37",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "BackendTestPipelineProductionBackEndTestCodePipelineActionRoleDefaultPolicy39EAFA4A",
    "Roles": [
     {
      "Ref": "BackendTestPipelineProductionBackEndTestCodePipelineActionRoleBAD11ABB"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Production/Back-End-Test/Back-End-Test/CodePipelineActionRole/DefaultPolicy/Resource"
   }
  },
  "BackendTestPipelineProductionFrontEndTestCodePipelineActionRoleCBDF2EEE": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":iam::277707106605:root"
          ]
         ]
        }
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Production/Front-End-Test/Front-End-Test/CodePipelineActionRole/Resource"
   }
  },
  "BackendTestPipelineProductionFrontEndTestCodePipelineActionRoleDefaultPolicyD65925B9": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "codebuild:BatchGetBuilds",
        "codebuild:StartBuild",
        "codebuild:StopBuild"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "Chapter5FrontEndTestPipelineProjectProduction804F7636",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "BackendTestPipelineProductionFrontEndTestCodePipelineActionRoleDefaultPolicyD65925B9",
    "Roles": [
     {
      "Ref": "BackendTestPipelineProductionFrontEndTestCodePipelineActionRoleCBDF2EEE"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Production/Front-End-Test/Front-End-Test/CodePipelineActionRole/DefaultPolicy/Resource"
   }
  },
  "BackendTestPipelineProductionBuildandDeployBuildandDeployFrontandBackEndCodePipelineActionRoleC28C6FCE": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":iam::277707106605:root"
          ]
         ]
        }
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Production/Build-and-Deploy/Build-and-Deploy-Front-and-Back-End/CodePipelineActionRole/Resource"
   }
  },
  "BackendTestPipelineProductionBuildandDeployBuildandDeployFrontandBackEndCodePipelineActionRoleDefaultPolicy6CAFD59B": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "codebuild:BatchGetBuilds",
        "codebuild:StartBuild",
        "codebuild:StopBuild"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "Chapter5PipelineProdChapter5BackEndBuildPipelineProjectProduction9DCECFBA",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "BackendTestPipelineProductionBuildandDeployBuildandDeployFrontandBackEndCodePipelineActionRoleDefaultPolicy6CAFD59B",
    "Roles": [
     {
      "Ref": "BackendTestPipelineProductionBuildandDeployBuildandDeployFrontandBackEndCodePipelineActionRoleC28C6FCE"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Production/Build-and-Deploy/Build-and-Deploy-Front-and-Back-End/CodePipelineActionRole/DefaultPolicy/Resource"
   }
  },
  "Chapter5PipelineDevChapter5BackEndBuildPipelineProjectDevelopmentRole9871C680": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "codebuild.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Context",
      "Value": "chapter5-development-pipeline"
     },
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-Pipeline-Dev/Chapter5-BackEndBuild-PipelineProject-Development/Role/Resource"
   }
  },
  "Chapter5PipelineDevChapter5BackEndBuildPipelineProjectDevelopmentRoleDefaultPolicy40726069": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":logs:us-east-1:277707106605:log-group:/aws/codebuild/",
           {
            "Ref": "Chapter5PipelineDevChapter5BackEndBuildPipelineProjectDevelopment559552B5"
           },
           ":*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":logs:us-east-1:277707106605:log-group:/aws/codebuild/",
           {
            "Ref": "Chapter5PipelineDevChapter5BackEndBuildPipelineProjectDevelopment559552B5"
           }
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "codebuild:BatchPutCodeCoverages",
        "codebuild:BatchPutTestCases",
        "codebuild:CreateReport",
        "codebuild:CreateReportGroup",
        "codebuild:UpdateReport"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":codebuild:us-east-1:277707106605:report-group/",
          {
           "Ref": "Chapter5PipelineDevChapter5BackEndBuildPipelineProjectDevelopment559552B5"
          },
          "-*"
         ]
        ]
       }
      },
      {
       "Action": [
        "iam:PassRole",
        "sts:AssumeRole"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:iam::*:role/cdk-hnb659fds-deploy-role-*",
        "arn:aws:iam::*:role/cdk-hnb659fds-file-publishing-*",
        "arn:aws:iam::*:role/cdk-hnb659fds-image-publishing-role-*",
        "arn:aws:iam::*:role/cdk-hnb659fds-lookup-role-*",
        "arn:aws:iam::*:role/cdk-readOnlyRole"
       ],
       "Sid": "AssumeRole"
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "BackendTestPipelineDevelopmentArtifactsBucket4BE3EF80",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "BackendTestPipelineDevelopmentArtifactsBucket4BE3EF80",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "BackendTestPipelineDevelopmentArtifactsBucketEncryptionKey4F0771FB",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "Chapter5PipelineDevChapter5BackEndBuildPipelineProjectDevelopmentRoleDefaultPolicy40726069",
    "Roles": [
     {
      "Ref": "Chapter5PipelineDevChapter5BackEndBuildPipelineProjectDevelopmentRole9871C680"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-Pipeline-Dev/Chapter5-BackEndBuild-PipelineProject-Development/Role/DefaultPolicy/Resource"
   }
  },
  "Chapter5PipelineDevChapter5BackEndBuildPipelineProjectDevelopment559552B5": {
   "Type": "AWS::CodeBuild::Project",
   "Properties": {
    "Artifacts": {
     "Type": "CODEPIPELINE"
    },
    "Cache": {
     "Type": "NO_CACHE"
    },
    "EncryptionKey": {
     "Fn::GetAtt": [
      "BackendTestPipelineDevelopmentArtifactsBucketEncryptionKey4F0771FB",
      "Arn"
     ]
    },
    "Environment": {
     "ComputeType": "BUILD_GENERAL1_SMALL",
     "Image": "aws/codebuild/amazonlinux2-x86_64-standard:4.0",
     "ImagePullCredentialsType": "CODEBUILD",
     "PrivilegedMode": true,
     "Type": "LINUX_CONTAINER"
    },
    "Name": "Chapter5-BackEndBuild-PipelineProject-Development",
    "ServiceRole": {
     "Fn::GetAtt": [
      "Chapter5PipelineDevChapter5BackEndBuildPipelineProjectDevelopmentRole9871C680",
      "Arn"
     ]
    },
    "Source": {
     "BuildSpec": "{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"runtime-versions\": {\n        \"nodejs\": \"16\"\n      }\n    },\n    \"pre_build\": {\n      \"on-failure\": \"ABORT\",\n      \"commands\": [\n        \"cd web\",\n        \"yarn install\",\n        \"cd ../server\",\n        \"yarn install\",\n        \"cd ../infrastructure\",\n        \"yarn install\"\n      ]\n    },\n    \"build\": {\n      \"on-failure\": \"ABORT\",\n      \"commands\": [\n        \"cd ../web\",\n        \"yarn build:dev\",\n        \"cd ../infrastructure\",\n        \"yarn cdk:dev deploy\"\n      ]\n    },\n    \"post_build\": {\n      \"on-failure\": \"ABORT\",\n      \"commands\": [\n        \"\"\n      ]\n    }\n  }\n}",
     "Type": "CODEPIPELINE"
    },
    "Tags": [
     {
      "Key": "Context",
      "Value": "chapter5-development-pipeline"
     },
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-Pipeline-Dev/Chapter5-BackEndBuild-PipelineProject-Development/Resource"
   }
  },
  "Chapter5PipelineDevDevelopmentPipelineSlackNotificationsTopicCEE7F036": {
   "Type": "AWS::SNS::Topic",
   "Properties": {
    "Tags": [
     {
      "Key": "Context",
      "Value": "chapter5-development-pipeline"
     },
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-Pipeline-Dev/Development-Pipeline-SlackNotificationsTopic/Resource"
   }
  },
  "Chapter5PipelineDevDevelopmentPipelineSlackNotificationsTopicPolicyF43C0B11": {
   "Type": "AWS::SNS::TopicPolicy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sns:Publish",
       "Effect": "Allow",
       "Principal": {
        "Service": "codestar-notifications.amazonaws.com"
       },
       "Resource": {
        "Ref": "Chapter5PipelineDevDevelopmentPipelineSlackNotificationsTopicCEE7F036"
       },
       "Sid": "0"
      }
     ],
     "Version": "2012-10-17"
    },
    "Topics": [
     {
      "Ref": "Chapter5PipelineDevDevelopmentPipelineSlackNotificationsTopicCEE7F036"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-Pipeline-Dev/Development-Pipeline-SlackNotificationsTopic/Policy/Resource"
   }
  },
  "Chapter5PipelineDevNotificationRule5841AABC": {
   "Type": "AWS::CodeStarNotifications::NotificationRule",
   "Properties": {
    "DetailType": "FULL",
    "EventTypeIds": [
     "codepipeline-pipeline-pipeline-execution-failed",
     "codepipeline-pipeline-pipeline-execution-canceled",
     "codepipeline-pipeline-pipeline-execution-started",
     "codepipeline-pipeline-pipeline-execution-resumed",
     "codepipeline-pipeline-pipeline-execution-succeeded",
     "codepipeline-pipeline-manual-approval-needed"
    ],
    "Name": "chap5",
    "Resource": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":codepipeline:us-east-1:277707106605:",
       {
        "Ref": "BackendTestPipelineDevelopmentF66B4886"
       }
      ]
     ]
    },
    "Tags": {
     "Context": "chapter5-development-pipeline",
     "Project": "Chapter5-Pipeline"
    },
    "Targets": [
     {
      "TargetAddress": {
       "Ref": "Chapter5PipelineDevDevelopmentPipelineSlackNotificationsTopicCEE7F036"
      },
      "TargetType": "SNS"
     },
     {
      "TargetAddress": "arn:aws:chatbot::277707106605:chat-configuration/slack-channel/my-chap5-config",
      "TargetType": "AWSChatbotSlack"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-Pipeline-Dev/NotificationRule/Resource"
   }
  },
  "Chapter5BackEndTestPipelineProjectDevelopmentRole1FB5C1CE": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "codebuild.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-BackEndTest-PipelineProject-Development/Role/Resource"
   }
  },
  "Chapter5BackEndTestPipelineProjectDevelopmentRoleDefaultPolicy3105C741": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":logs:us-east-1:277707106605:log-group:/aws/codebuild/",
           {
            "Ref": "Chapter5BackEndTestPipelineProjectDevelopment1019BC25"
           },
           ":*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":logs:us-east-1:277707106605:log-group:/aws/codebuild/",
           {
            "Ref": "Chapter5BackEndTestPipelineProjectDevelopment1019BC25"
           }
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "codebuild:BatchPutCodeCoverages",
        "codebuild:BatchPutTestCases",
        "codebuild:CreateReport",
        "codebuild:CreateReportGroup",
        "codebuild:UpdateReport"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":codebuild:us-east-1:277707106605:report-group/",
          {
           "Ref": "Chapter5BackEndTestPipelineProjectDevelopment1019BC25"
          },
          "-*"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "BackendTestPipelineDevelopmentArtifactsBucket4BE3EF80",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "BackendTestPipelineDevelopmentArtifactsBucket4BE3EF80",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "BackendTestPipelineDevelopmentArtifactsBucketEncryptionKey4F0771FB",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "Chapter5BackEndTestPipelineProjectDevelopmentRoleDefaultPolicy3105C741",
    "Roles": [
     {
      "Ref": "Chapter5BackEndTestPipelineProjectDevelopmentRole1FB5C1CE"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-BackEndTest-PipelineProject-Development/Role/DefaultPolicy/Resource"
   }
  },
  "Chapter5BackEndTestPipelineProjectDevelopment1019BC25": {
   "Type": "AWS::CodeBuild::Project",
   "Properties": {
    "Artifacts": {
     "Type": "CODEPIPELINE"
    },
    "Cache": {
     "Type": "NO_CACHE"
    },
    "EncryptionKey": {
     "Fn::GetAtt": [
      "BackendTestPipelineDevelopmentArtifactsBucketEncryptionKey4F0771FB",
      "Arn"
     ]
    },
    "Environment": {
     "ComputeType": "BUILD_GENERAL1_SMALL",
     "Image": "aws/codebuild/amazonlinux2-x86_64-standard:4.0",
     "ImagePullCredentialsType": "CODEBUILD",
     "PrivilegedMode": false,
     "Type": "LINUX_CONTAINER"
    },
    "Name": "Chapter5-BackEndTest-PipelineProject-Development",
    "ServiceRole": {
     "Fn::GetAtt": [
      "Chapter5BackEndTestPipelineProjectDevelopmentRole1FB5C1CE",
      "Arn"
     ]
    },
    "Source": {
     "BuildSpec": "{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"runtime-versions\": {\n        \"nodejs\": \"16\"\n      }\n    },\n    \"pre_build\": {\n      \"on-failure\": \"ABORT\",\n      \"commands\": [\n        \"cd server/\",\n        \"yarn install\"\n      ]\n    },\n    \"build\": {\n      \"on-failure\": \"ABORT\",\n      \"commands\": [\n        \"echo Testing the Back-End...\",\n        \"yarn test\"\n      ]\n    }\n  }\n}",
     "Type": "CODEPIPELINE"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-BackEndTest-PipelineProject-Development/Resource"
   }
  },
  "Chapter5FrontEndTestPipelineProjectDevelopmentRole27A160A2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "codebuild.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-FrontEndTest-PipelineProject-Development/Role/Resource"
   }
  },
  "Chapter5FrontEndTestPipelineProjectDevelopmentRoleDefaultPolicyAE317442": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":logs:us-east-1:277707106605:log-group:/aws/codebuild/",
           {
            "Ref": "Chapter5FrontEndTestPipelineProjectDevelopmentE5F20566"
           },
           ":*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":logs:us-east-1:277707106605:log-group:/aws/codebuild/",
           {
            "Ref": "Chapter5FrontEndTestPipelineProjectDevelopmentE5F20566"
           }
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "codebuild:BatchPutCodeCoverages",
        "codebuild:BatchPutTestCases",
        "codebuild:CreateReport",
        "codebuild:CreateReportGroup",
        "codebuild:UpdateReport"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":codebuild:us-east-1:277707106605:report-group/",
          {
           "Ref": "Chapter5FrontEndTestPipelineProjectDevelopmentE5F20566"
          },
          "-*"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "BackendTestPipelineDevelopmentArtifactsBucket4BE3EF80",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "BackendTestPipelineDevelopmentArtifactsBucket4BE3EF80",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "BackendTestPipelineDevelopmentArtifactsBucketEncryptionKey4F0771FB",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "Chapter5FrontEndTestPipelineProjectDevelopmentRoleDefaultPolicyAE317442",
    "Roles": [
     {
      "Ref": "Chapter5FrontEndTestPipelineProjectDevelopmentRole27A160A2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-FrontEndTest-PipelineProject-Development/Role/DefaultPolicy/Resource"
   }
  },
  "Chapter5FrontEndTestPipelineProjectDevelopmentE5F20566": {
   "Type": "AWS::CodeBuild::Project",
   "Properties": {
    "Artifacts": {
     "Type": "CODEPIPELINE"
    },
    "Cache": {
     "Type": "NO_CACHE"
    },
    "EncryptionKey": {
     "Fn::GetAtt": [
      "BackendTestPipelineDevelopmentArtifactsBucketEncryptionKey4F0771FB",
      "Arn"
     ]
    },
    "Environment": {
     "ComputeType": "BUILD_GENERAL1_SMALL",
     "Image": "aws/codebuild/amazonlinux2-x86_64-standard:4.0",
     "ImagePullCredentialsType": "CODEBUILD",
     "PrivilegedMode": false,
     "Type": "LINUX_CONTAINER"
    },
    "Name": "Chapter5-FrontEndTest-PipelineProject-Development",
    "ServiceRole": {
     "Fn::GetAtt": [
      "Chapter5FrontEndTestPipelineProjectDevelopmentRole27A160A2",
      "Arn"
     ]
    },
    "Source": {
     "BuildSpec": "{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"runtime-versions\": {\n        \"nodejs\": \"16\"\n      }\n    },\n    \"pre_build\": {\n      \"on-failure\": \"ABORT\",\n      \"commands\": [\n        \"cd web/\",\n        \"yarn install\"\n      ]\n    },\n    \"build\": {\n      \"on-failure\": \"ABORT\",\n      \"commands\": [\n        \"echo Testing the Front-End...\",\n        \"yarn test\"\n      ]\n    }\n  }\n}",
     "Type": "CODEPIPELINE"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/Chapter5-FrontEndTest-PipelineProject-Development/Resource"
   }
  },
  "BackendTestPipelineDevelopmentArtifactsBucketEncryptionKey4F0771FB": {
   "Type": "AWS::KMS::Key",
   "Properties": {
    "KeyPolicy": {
     "Statement": [
      {
       "Action": "kms:*",
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":iam::277707106605:root"
          ]
         ]
        }
       },
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Development/ArtifactsBucketEncryptionKey/Resource"
   }
  },
  "BackendTestPipelineDevelopmentArtifactsBucketEncryptionKeyAliasE385BF9E": {
   "Type": "AWS::KMS::Alias",
   "Properties": {
    "AliasName": "alias/codepipeline-chapter5pipelinestackbackendtestpipelinedevelopment6840b1b3",
    "TargetKeyId": {
     "Fn::GetAtt": [
      "BackendTestPipelineDevelopmentArtifactsBucketEncryptionKey4F0771FB",
      "Arn"
     ]
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Development/ArtifactsBucketEncryptionKeyAlias/Resource"
   }
  },
  "BackendTestPipelineDevelopmentArtifactsBucket4BE3EF80": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "KMSMasterKeyID": {
         "Fn::GetAtt": [
          "BackendTestPipelineDevelopmentArtifactsBucketEncryptionKey4F0771FB",
          "Arn"
         ]
        },
        "SSEAlgorithm": "aws:kms"
       }
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Development/ArtifactsBucket/Resource"
   }
  },
  "BackendTestPipelineDevelopmentArtifactsBucketPolicyFB106AC9": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "BackendTestPipelineDevelopmentArtifactsBucket4BE3EF80"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "BackendTestPipelineDevelopmentArtifactsBucket4BE3EF80",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "BackendTestPipelineDevelopmentArtifactsBucket4BE3EF80",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Development/ArtifactsBucket/Policy/Resource"
   }
  },
  "BackendTestPipelineDevelopmentRoleC7844028": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "codepipeline.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Development/Role/Resource"
   }
  },
  "BackendTestPipelineDevelopmentRoleDefaultPolicy8E5DD755": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "BackendTestPipelineDevelopmentArtifactsBucket4BE3EF80",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "BackendTestPipelineDevelopmentArtifactsBucket4BE3EF80",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "BackendTestPipelineDevelopmentArtifactsBucketEncryptionKey4F0771FB",
         "Arn"
        ]
       }
      },
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "BackendTestPipelineDevelopmentBackEndTestCodePipelineActionRole99455031",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "BackendTestPipelineDevelopmentBuildandDeployBuildandDeployFrontandBackEndCodePipelineActionRole3FAF86B2",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "BackendTestPipelineDevelopmentFrontEndTestCodePipelineActionRoleC3872834",
          "Arn"
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "BackendTestPipelineDevelopmentRoleDefaultPolicy8E5DD755",
    "Roles": [
     {
      "Ref": "BackendTestPipelineDevelopmentRoleC7844028"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Development/Role/DefaultPolicy/Resource"
   }
  },
  "BackendTestPipelineDevelopmentF66B4886": {
   "Type": "AWS::CodePipeline::Pipeline",
   "Properties": {
    "ArtifactStore": {
     "EncryptionKey": {
      "Id": {
       "Fn::GetAtt": [
        "BackendTestPipelineDevelopmentArtifactsBucketEncryptionKey4F0771FB",
        "Arn"
       ]
      },
      "Type": "KMS"
     },
     "Location": {
      "Ref": "BackendTestPipelineDevelopmentArtifactsBucket4BE3EF80"
     },
     "Type": "S3"
    },
    "Name": "Chapter5-Pipeline-Development",
    "RoleArn": {
     "Fn::GetAtt": [
      "BackendTestPipelineDevelopmentRoleC7844028",
      "Arn"
     ]
    },
    "Stages": [
     {
      "Actions": [
       {
        "ActionTypeId": {
         "Category": "Source",
         "Owner": "ThirdParty",
         "Provider": "GitHub",
         "Version": "1"
        },
        "Configuration": {
         "Owner": "Reyev123",
         "Repo": "AWS-CDK-in-Practice",
         "Branch": "dev",
         "OAuthToken": "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",
         "PollForSourceChanges": false
        },
        "Name": "Source",
        "OutputArtifacts": [
         {
          "Name": "Artifact_Source_Source"
         }
        ],
        "RunOrder": 1
       }
      ],
      "Name": "Source"
     },
     {
      "Actions": [
       {
        "ActionTypeId": {
         "Category": "Build",
         "Owner": "AWS",
         "Provider": "CodeBuild",
         "Version": "1"
        },
        "Configuration": {
         "ProjectName": {
          "Ref": "Chapter5BackEndTestPipelineProjectDevelopment1019BC25"
         }
        },
        "InputArtifacts": [
         {
          "Name": "Artifact_Source_Source"
         }
        ],
        "Name": "Back-End-Test",
        "RoleArn": {
         "Fn::GetAtt": [
          "BackendTestPipelineDevelopmentBackEndTestCodePipelineActionRole99455031",
          "Arn"
         ]
        },
        "RunOrder": 1
       }
      ],
      "Name": "Back-End-Test"
     },
     {
      "Actions": [
       {
        "ActionTypeId": {
         "Category": "Build",
         "Owner": "AWS",
         "Provider": "CodeBuild",
         "Version": "1"
        },
        "Configuration": {
         "ProjectName": {
          "Ref": "Chapter5FrontEndTestPipelineProjectDevelopmentE5F20566"
         }
        },
        "InputArtifacts": [
         {
          "Name": "Artifact_Source_Source"
         }
        ],
        "Name": "Front-End-Test",
        "RoleArn": {
         "Fn::GetAtt": [
          "BackendTestPipelineDevelopmentFrontEndTestCodePipelineActionRoleC3872834",
          "Arn"
         ]
        },
        "RunOrder": 1
       }
      ],
      "Name": "Front-End-Test"
     },
     {
      "Actions": [
       {
        "ActionTypeId": {
         "Category": "Build",
         "Owner": "AWS",
         "Provider": "CodeBuild",
         "Version": "1"
        },
        "Configuration": {
         "ProjectName": {
          "Ref": "Chapter5PipelineDevChapter5BackEndBuildPipelineProjectDevelopment559552B5"
         }
        },
        "InputArtifacts": [
         {
          "Name": "Artifact_Source_Source"
         }
        ],
        "Name": "Build-and-Deploy-Front-and-Back-End",
        "RoleArn": {
         "Fn::GetAtt": [
          "BackendTestPipelineDevelopmentBuildandDeployBuildandDeployFrontandBackEndCodePipelineActionRole3FAF86B2",
          "Arn"
         ]
        },
        "RunOrder": 1
       }
      ],
      "Name": "Build-and-Deploy"
     }
    ],
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "DependsOn": [
    "BackendTestPipelineDevelopmentRoleDefaultPolicy8E5DD755",
    "BackendTestPipelineDevelopmentRoleC7844028"
   ],
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Development/Resource"
   }
  },
  "BackendTestPipelineDevelopmentSourceWebhookResource238E05EB": {
   "Type": "AWS::CodePipeline::Webhook",
   "Properties": {
    "Authentication": "GITHUB_HMAC",
    "AuthenticationConfiguration": {
     "SecretToken": "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"
    },
    "Filters": [
     {
      "JsonPath": "$.ref",
      "MatchEquals": "refs/heads/{Branch}"
     }
    ],
    "RegisterWithThirdParty": true,
    "TargetAction": "Source",
    "TargetPipeline": {
     "Ref": "BackendTestPipelineDevelopmentF66B4886"
    },
    "TargetPipelineVersion": 1
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Development/Source/Source/WebhookResource"
   }
  },
  "BackendTestPipelineDevelopmentBackEndTestCodePipelineActionRole99455031": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":iam::277707106605:root"
          ]
         ]
        }
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Development/Back-End-Test/Back-End-Test/CodePipelineActionRole/Resource"
   }
  },
  "BackendTestPipelineDevelopmentBackEndTestCodePipelineActionRoleDefaultPolicy7F6ABEDF": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "codebuild:BatchGetBuilds",
        "codebuild:StartBuild",
        "codebuild:StopBuild"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "Chapter5BackEndTestPipelineProjectDevelopment1019BC25",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "BackendTestPipelineDevelopmentBackEndTestCodePipelineActionRoleDefaultPolicy7F6ABEDF",
    "Roles": [
     {
      "Ref": "BackendTestPipelineDevelopmentBackEndTestCodePipelineActionRole99455031"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Development/Back-End-Test/Back-End-Test/CodePipelineActionRole/DefaultPolicy/Resource"
   }
  },
  "BackendTestPipelineDevelopmentFrontEndTestCodePipelineActionRoleC3872834": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":iam::277707106605:root"
          ]
         ]
        }
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Development/Front-End-Test/Front-End-Test/CodePipelineActionRole/Resource"
   }
  },
  "BackendTestPipelineDevelopmentFrontEndTestCodePipelineActionRoleDefaultPolicy6BFD7FCD": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "codebuild:BatchGetBuilds",
        "codebuild:StartBuild",
        "codebuild:StopBuild"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "Chapter5FrontEndTestPipelineProjectDevelopmentE5F20566",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "BackendTestPipelineDevelopmentFrontEndTestCodePipelineActionRoleDefaultPolicy6BFD7FCD",
    "Roles": [
     {
      "Ref": "BackendTestPipelineDevelopmentFrontEndTestCodePipelineActionRoleC3872834"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Development/Front-End-Test/Front-End-Test/CodePipelineActionRole/DefaultPolicy/Resource"
   }
  },
  "BackendTestPipelineDevelopmentBuildandDeployBuildandDeployFrontandBackEndCodePipelineActionRole3FAF86B2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":iam::277707106605:root"
          ]
         ]
        }
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Project",
      "Value": "Chapter5-Pipeline"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Development/Build-and-Deploy/Build-and-Deploy-Front-and-Back-End/CodePipelineActionRole/Resource"
   }
  },
  "BackendTestPipelineDevelopmentBuildandDeployBuildandDeployFrontandBackEndCodePipelineActionRoleDefaultPolicyE259E923": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "codebuild:BatchGetBuilds",
        "codebuild:StartBuild",
        "codebuild:StopBuild"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "Chapter5PipelineDevChapter5BackEndBuildPipelineProjectDevelopment559552B5",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "BackendTestPipelineDevelopmentBuildandDeployBuildandDeployFrontandBackEndCodePipelineActionRoleDefaultPolicyE259E923",
    "Roles": [
     {
      "Ref": "BackendTestPipelineDevelopmentBuildandDeployBuildandDeployFrontandBackEndCodePipelineActionRole3FAF86B2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/BackendTest-Pipeline-Development/Build-and-Deploy/Build-and-Deploy-Front-and-Back-End/CodePipelineActionRole/DefaultPolicy/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/12QQUvEMBCFf8ve03GtCHtVj4KUKniUNJ3FadNM6aQuEvLfJUmhxUve94bJzEtquFzgfNI3qUw/VpY6CO9em1Hpm3wFwz12K9keQkMzWnLYLDyg8erl6jaMivQEoWWLqZq1YUvmNzdlikqcQPjgmUyqFsjn3nqwUaXV4vXi2NOVjPbEacLbwbZr2fi/Vi7PW+A9eo5z4E/svpnHqMZJILxiDpHkyZKWZDJEJQ8QnlczYn72RkX29Ecfo2pReF1M+ZKNo3LcIwxy91PXcP8I59MgRNWyOk8TQlv0DxjQ7uyVAQAA"
   },
   "Metadata": {
    "aws:cdk:path": "Chapter5PipelineStack/CDKMetadata/Default"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}